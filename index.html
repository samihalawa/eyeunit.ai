<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EyeUnit.ai - Unlocking Vision with AI Innovation</title>

    <!-- Consolidated CDN preconnects -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>

    <!-- Bundle CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

    <!-- Bundle JS -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- Interactive Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/parallax.js/1.5.0/parallax.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script src="https://unpkg.com/typeit@8.7.0/dist/index.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- SEO Metadata -->
    <meta name="description" content="Revolutionizing Ophthalmology with AI-Driven Solutions for Diagnostics, Research, and Patient Care">
    <meta name="keywords" content="AI Ophthalmology, Medical AI, Machine Learning, Healthcare Innovation, Retinal Analysis, Medical Technology">

    <!-- Add after existing meta tags -->
    <link rel="canonical" href="https://www.eyeunit.ai" />
    <meta property="og:title" content="EyeUnit.ai - AI Innovation in Ophthalmology">
    <meta property="og:description" content="Revolutionizing eye care with AI-powered solutions">
    <meta property="og:image" content="https://www.eyeunit.ai/assets/og-image.jpg">
    <meta property="og:url" content="https://www.eyeunit.ai">
    <meta name="twitter:card" content="summary_large_image">
    
    <!-- Preload critical assets -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" as="font" crossorigin>
    
    <!-- Add structured data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "EyeUnit.ai",
        "url": "https://www.eyeunit.ai",
        "logo": "https://www.eyeunit.ai/logo.png",
        "sameAs": [
            "https://twitter.com/eyeunitai",
            "https://linkedin.com/company/eyeunit-ai"
        ]
    }
    </script>

    <!-- Add resource hints -->
    <link rel="preconnect" href="https://images.unsplash.com">
    <link rel="preconnect" href="https://res.cloudinary.com">
    <link rel="dns-prefetch" href="https://api.eyeunit.ai">

    <!-- Add favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

    <style>
        :root {
            --color-primary: #3B82F6;
            --color-secondary: #10B981;
            --color-background: #F9FAFB;
            --color-text: #1F2937;
            --transition-duration: 0.3s;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text);
            scroll-behavior: smooth;
            transition: all var(--transition-duration) ease;
        }

        .gradient-text {
            background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .advanced-shadow {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .advanced-shadow:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.2);
        }

        .blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.4;
        }

        .hero-image {
            max-width: 100%;
            height: auto;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.1));
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .newsletter-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 0.5rem;
            transition: border-color 0.3s;
        }

        .newsletter-input:focus {
            border-color: var(--color-primary);
            outline: none;
            @apply ring-2 ring-blue-500 ring-opacity-50;
        }

        .loader {
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--color-primary);
            border-radius: 50%;
            width: 14px;
            height: 14px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .team-card {
            transition: transform 0.3s ease;
        }
        .team-card:hover {
            transform: translateY(-10px);
        }

        * {
            transition: all var(--transition-duration) ease;
        }

        @media (min-width: 1024px) {
            h1 {
                font-size: clamp(3rem, 5vw, 4.5rem);
                line-height: 1.1;
            }
            
            h2 {
                font-size: clamp(2rem, 4vw, 3rem);
            }
            
            p {
                font-size: clamp(1rem, 1.5vw, 1.25rem);
            }
        }

        .container {
            max-width: 1440px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-gradient {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%);
        }
        
        .nav-link {
            @apply px-4 py-2 rounded-lg transition-all duration-200;
        }
        
        .nav-link:hover {
            @apply bg-blue-50 dark:bg-gray-700;
        }
        
        .nav-link.active {
            @apply bg-blue-100 dark:bg-gray-600;
        }

        .dark-mode-toggle {
            @apply p-3 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-200;
        }

        .loading-skeleton {
            @apply animate-pulse bg-gray-200 dark:bg-gray-700 rounded-lg;
        }

        /* Add responsive utilities */
        .mobile-menu-container {
            @apply fixed inset-0 z-50 transform transition-transform duration-300 ease-in-out;
        }
        
        .mobile-menu-container.hidden {
            transform: translateX(-100%);
        }
        
        @media (max-width: 768px) {
            .container {
                @apply px-4 mx-auto w-full max-w-none;
            }
            
            .hero-content {
                @apply text-center py-8;
            }
            
            .hero-buttons {
                @apply flex-col space-y-4 w-full;
            }
            
            .nav-menu {
                @apply hidden;
            }
            
            .mobile-menu {
                @apply block;
            }

            .team-card {
                @apply mx-auto max-w-sm;
            }

            .research-grid {
                @apply grid-cols-1 gap-6;
            }

            .contact-form {
                @apply w-full max-w-md mx-auto;
            }

            .footer-links {
                @apply grid-cols-2 gap-4;
            }
        }
        
        @media (max-width: 640px) {
            h1 {
                font-size: clamp(2rem, 8vw, 3rem);
            }
            
            h2 {
                font-size: clamp(1.5rem, 6vw, 2rem);
            }
            
            p {
                font-size: clamp(0.875rem, 4vw, 1rem);
            }
        }

        /* Fix form elements on mobile */
        .form-input, .form-textarea {
            @apply w-full px-3 py-2 text-base;
            @apply border border-gray-300 rounded-lg;
            @apply focus:ring-2 focus:ring-blue-500 focus:border-blue-500;
        }

        /* Fix mobile menu */
        .mobile-menu-container {
            @apply fixed inset-0 z-50 bg-white dark:bg-gray-800;
            @apply transform transition-transform duration-300;
        }

        .mobile-menu-container.hidden {
            @apply -translate-x-full;
        }

        /* Fix image responsiveness */
        .responsive-image {
            @apply w-full h-auto object-cover;
            @apply max-w-full mx-auto;
        }

        /* Fix button responsiveness */
        .responsive-button {
            @apply w-full sm:w-auto;
            @apply px-6 py-3;
            @apply flex items-center justify-center;
            @apply transition-all duration-200;
        }
    </style>

    <!-- Add Mermaid.js CDN link -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.2.4/dist/mermaid.min.js"></script>

    <!-- Add dark mode preference script -->
    <script>
        function initDarkMode() {
            // Check system preference first
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const storedPreference = localStorage.getItem('darkMode');
            
            // Set initial state
            const shouldBeDark = storedPreference !== null ? storedPreference === 'true' : systemPrefersDark;
            document.documentElement.classList.toggle('dark', shouldBeDark);
            
            // Listen for system changes
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (localStorage.getItem('darkMode') === null) {
                    document.documentElement.classList.toggle('dark', e.matches);
                }
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initDarkMode);
    </script>

    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' https: 'unsafe-inline' 'unsafe-eval'; style-src 'self' https: 'unsafe-inline';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
</head>

<body 
    x-data="formHandler()" 
    :class="{ 'dark': darkMode }"
    @scroll.window="scrollProgress = (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100"
    class="bg-white text-gray-900 dark:bg-gray-900 dark:text-white relative"
>
    <!-- Progress Bar -->
    <div 
        class="progress-bar fixed top-0 left-0 right-0 h-1 bg-blue-500 z-50" 
        :style="`width: ${scrollProgress}%`"
    ></div>

    <!-- Blob Background -->
    <div class="absolute inset-0 overflow-hidden z-[-1]">
        <div class="blob bg-blue-400" style="top: 10%; left: 20%; width: 300px; height: 300px;"></div>
        <div class="blob bg-green-400" style="bottom: 20%; right: 30%; width: 250px; height: 250px;"></div>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <a href="/" class="text-2xl font-bold gradient-text">EyeUnit.ai</a>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-6">
                    <a href="#home" class="nav-link">Home</a>
                    <a href="#technologies" class="nav-link">Technologies</a>
                    <a href="#research" class="nav-link">Research</a>
                    <a href="#solutions" class="nav-link">Solutions</a>
                    <a href="#contact" class="nav-link">Contact</a>
                    <button 
                        @click="toggleDarkMode()"
                        class="dark-mode-toggle"
                    >
                        <i :class="darkMode ? 'fas fa-sun' : 'fas fa-moon'"></i>
                    </button>
                </div>
                
                <!-- Mobile Menu Button -->
                <button 
                    @click="mobileMenu = !mobileMenu"
                    class="md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"
                    aria-label="Toggle mobile menu"
                    :aria-expanded="mobileMenu.toString()"
                >
                    <i :class="mobileMenu ? 'fas fa-times' : 'fas fa-bars'" class="text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div 
            x-show="mobileMenu"
            x-transition:enter="transition ease-out duration-200"
            x-transition:enter-start="opacity-0 transform -translate-y-4"
            x-transition:enter-end="opacity-100 transform translate-y-0"
            class="md:hidden bg-white dark:bg-gray-800 border-t dark:border-gray-700"
        >
            <div class="container mx-auto py-4 px-4 space-y-4">
                <a href="#home" @click="mobileMenu = false" class="block py-2 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">Home</a>
                <a href="#technologies" @click="mobileMenu = false" class="block py-2 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">Technologies</a>
                <a href="#research" @click="mobileMenu = false" class="block py-2 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">Research</a>
                <a href="#solutions" @click="mobileMenu = false" class="block py-2 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">Solutions</a>
                <a href="#contact" @click="mobileMenu = false" class="block py-2 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">Contact</a>
            </div>
        </div>
    </nav>
    <!-- Hero Section -->
    <header class="min-h-screen pt-20 flex items-center hero-gradient">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
            <div class="hero-content py-16 md:py-24">
                <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 dark:text-white">
                    Revolutionizing <span class="gradient-text">Ophthalmology</span><br>with AI
                </h1>
                <p class="text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300">
                    EyeUnit.ai is revolutionizing ophthalmology with cutting-edge AI technologies, offering precision diagnostics, advanced research, and innovative solutions for eye care.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
                    <button class="responsive-button bg-blue-600 text-white rounded-full hover:bg-blue-700">
                        Explore Technologies
                    </button>
                    <button class="responsive-button border-2 border-blue-600 text-blue-600 rounded-full hover:bg-blue-600 hover:text-white">
                        View Research
                    </button>
                </div>
            </div>
            <div class="hidden md:block">
                <img 
                    src="https://images.unsplash.com/photo-1633419461186-7d40a38105ec?auto=format&fit=crop&w=800"
                    alt="AI Vision Technology"
                    class="responsive-image rounded-2xl shadow-2xl"
                    loading="lazy"
                >
            </div>
        </div>
    </header>

    <!-- Technologies Section -->
    <section id="technologies" class="py-16 md:py-32 bg-white dark:bg-gray-800">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-12 gradient-text">
                Our Advanced AI Technologies
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                <div class="bg-gray-100 dark:bg-gray-700 p-6 md:p-8 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                    <i class="fas fa-brain text-3xl md:text-4xl text-blue-600 mb-4"></i>
                    <h3 class="text-xl md:text-2xl font-semibold mb-4">Neural Diagnostics</h3>
                    <p class="text-gray-600 dark:text-gray-300">Our advanced deep learning models analyze retinal images with unparalleled precision, aiding in early disease detection and accurate diagnosis.</p>
                </div>
                
                <div class="bg-gray-100 dark:bg-gray-700 p-6 md:p-8 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                    <i class="fas fa-chart-line text-3xl md:text-4xl text-green-600 mb-4"></i>
                    <h3 class="text-xl md:text-2xl font-semibold mb-4">Predictive Analytics</h3>
                    <p class="text-gray-600 dark:text-gray-300">Machine learning algorithms predict eye health risks, providing healthcare professionals with valuable insights for proactive patient care.</p>
                </div>
                
                <div class="bg-gray-100 dark:bg-gray-700 p-6 md:p-8 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                    <i class="fas fa-microscope text-3xl md:text-4xl text-purple-600 mb-4"></i>
                    <h3 class="text-xl md:text-2xl font-semibold mb-4">Research Innovation</h3>
                    <p class="text-gray-600 dark:text-gray-300">EyeUnit.ai's research team is at the forefront of AI-driven ocular research, pushing the boundaries of understanding and treatment.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Research Section -->
    <section id="research" class="py-16 md:py-32 bg-gray-50 dark:bg-gray-900">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
            <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-12 gradient-text">
                Research Impact Visualization
            </h2>
            
            <div class="max-w-5xl mx-auto">
                <div class="bg-white dark:bg-gray-800 p-6 md:p-8 rounded-xl shadow-lg">
                    <div class="h-[300px] md:h-[400px]">
                        <canvas id="researchChart" class="w-full h-full"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Research Paper Section -->
    <section id="research-paper" class="py-32 bg-white dark:bg-gray-800">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
            <div class="max-w-5xl mx-auto">
                <h2 class="text-4xl font-bold text-center mb-12 gradient-text">
                    Latest Research Publication
                </h2>

                <div class="bg-gray-50 dark:bg-gray-700 p-8 rounded-lg advanced-shadow">
                    <h3 class="text-3xl font-bold mb-6">Medical Image Analysis and Multi-Step Prompt Engineering Innovation</h3>
                    
                    <div class="prose dark:prose-invert max-w-none">
                        <!-- Research Abstract -->
                        <p class="text-lg mb-8 text-gray-600 dark:text-gray-300">
                            This research explores innovative approaches in automated precision diagnostics in medical image analysis through multi-step prompt engineering combined with Vision Language Models (VLM) and Retrieval Augmented Generation (RAG) technologies. Our work emphasizes breakthrough achievements in flexible application across various medical scenarios without pre-training, through dynamically optimized meta-prompt generation.
                        </p>

                        <!-- Key Research Areas -->
                        <div class="grid md:grid-cols-2 gap-8 mb-12">
                            <!-- OCT Analysis -->
                            <div class="bg-white dark:bg-gray-800 p-6 rounded-lg">
                                <h4 class="text-xl font-semibold mb-4">OCT Image Analysis</h4>
                                <img 
                                    src="https://res.cloudinary.com/eyeunit/image/upload/v1/medical/oct-posterior-1.jpg" 
                                    alt="Optical Coherence Tomography (OCT) scan showing detailed retinal layers"
                                    class="w-full h-48 object-cover rounded-lg mb-4"
                                    loading="lazy"
                                >
                                <p class="text-gray-600 dark:text-gray-300">
                                    Precise evaluation of macular conditions and ophthalmic structural changes through retinal OCT scanning.
                                </p>
                            </div>

                            <!-- MRI Analysis -->
                            <div class="bg-white dark:bg-gray-800 p-6 rounded-lg">
                                <h4 class="text-xl font-semibold mb-4">Abdominal MRI Analysis</h4>
                                <img 
                                    src="https://res.cloudinary.com/eyeunit/image/upload/v1/medical/abdominal-mri.jpg"
                                    alt="High-resolution MRI scan demonstrating advanced medical imaging capabilities"
                                    class="w-full h-48 object-cover rounded-lg mb-4"
                                    loading="lazy"
                                >
                                <p class="text-gray-600 dark:text-gray-300">
                                    Advanced analysis of hepatobiliary system morphology and vascular structures.
                                </p>
                            </div>
                        </div>

                        <!-- Technical Innovation -->
                        <div class="bg-blue-50 dark:bg-gray-600 p-6 rounded-lg mb-8">
                            <h4 class="text-xl font-semibold mb-4">Technical Innovations</h4>
                            <ul class="list-disc pl-6 space-y-2 text-gray-600 dark:text-gray-300">
                                <li>Intelligent prompt generation for optimal diagnostic strategies</li>
                                <li>Multi-level task decomposition of complex medical diagnostics</li>
                                <li>VLM-RAG fusion technology for real-time medical literature support</li>
                                <li>Zero-shot transfer capability for new scenario applications</li>
                            </ul>
                        </div>

                        <!-- Research Flow Diagram -->
                        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg mb-8">
                            <h4 class="text-xl font-semibold mb-4">Research Workflow</h4>
                            <div class="mermaid">
                                graph TB
                                    A[Dynamic Meta-Prompt System] --> B[Multi-Dimensional Prompt Generation]
                                    B --> C[VLM & RAG Technology Integration]
                                    C --> D[Intelligent Diagnostic Process]
                                    D --> E[Cross-Scenario Application]
                                    E --> F[Automated Medical Analysis]
                            </div>
                        </div>

                        <!-- Research Conclusion -->
                        <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg">
                            <h4 class="text-xl font-semibold mb-4">Research Impact</h4>
                            <p class="text-gray-600 dark:text-gray-300">
                                Our dynamic meta-prompt methodology, combined with advanced VLM and RAG technologies, has successfully overcome traditional limitations in medical image analysis. This innovation has not only significantly improved diagnostic efficiency and accuracy but also established new standards in medical imaging AI through zero-shot scenario transfer and dynamic prompt generation.
                            </p>
                        </div>
                    </div>

                    <!-- Research Actions -->
                    <div class="mt-8 flex justify-center space-x-4">
                        <a 
                            href="mailto:hello@eyeunit.ai?subject=Research%20Paper%20Request&body=I%20would%20like%20to%20request%20access%20to%20the%20research%20paper%20on%20Medical%20Image%20Analysis%20and%20Multi-Step%20Prompt%20Engineering%20Innovation."
                            class="px-6 py-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition"
                        >
                            Request Full Paper
                        </a>
                        <a 
                            href="mailto:hello@eyeunit.ai?subject=Research%20Team%20Contact" 
                            class="px-6 py-3 border-2 border-blue-600 text-blue-600 rounded-full hover:bg-blue-600 hover:text-white transition"
                        >
                            Contact Research Team
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Solutions Section -->
    <section id="solutions" class="py-20 bg-white dark:bg-gray-800">
        <div class="container mx-auto px-6">
            <h2 class="text-4xl font-bold text-center mb-12 gradient-text">
                Comprehensive AI Solutions
            </h2>
            
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-gray-100 dark:bg-gray-700 p-6 rounded-lg advanced-shadow hover:bg-blue-50 dark:hover:bg-gray-600 transition-colors duration-300" tabindex="0" aria-label="Diagnostic Platform">
                    <h3 class="text-2xl font-semibold mb-4">Diagnostic Platform</h3>
                    <p>Our AI-driven diagnostic platform offers a comprehensive suite of tools for accurate and efficient eye health assessment, empowering healthcare professionals with data-driven insights.</p>
                </div>
                
                <div class="bg-gray-100 dark:bg-gray-700 p-6 rounded-lg advanced-shadow hover:bg-blue-50 dark:hover:bg-gray-600 transition-colors duration-300" tabindex="0" aria-label="Research Analytics">
                    <h3 class="text-2xl font-semibold mb-4">Research Analytics</h3>
                    <p>EyeUnit.ai's research analytics solutions leverage advanced machine learning models and data analysis techniques to support medical research and accelerate scientific discoveries.</p>
                </div>
                
                <div class="bg-gray-100 dark:bg-gray-700 p-6 rounded-lg advanced-shadow hover:bg-blue-50 dark:hover:bg-gray-600 transition-colors duration-300" tabindex="0" aria-label="Clinical Integration">
                    <h3 class="text-2xl font-semibold mb-4">Clinical Integration</h3>
                    <p>We provide seamless integration of our AI solutions with existing medical infrastructure, ensuring a smooth and efficient workflow for healthcare providers.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Blog Section -->
    <section id="blog" class="py-20 bg-gray-50 dark:bg-gray-900">
        <div class="container mx-auto px-6">
            <h2 class="text-4xl font-bold text-center mb-12 gradient-text">
                Latest Insights & News
            </h2>
            
            <div class="grid md:grid-cols-3 gap-8" x-data="{ 
                posts: [], 
                currentPage: 1, 
                postsPerPage: 3, 
                totalPages: 0, 
                loading: true,
                error: null,
                darkMode: localStorage.getItem('darkMode') === 'true',
                blogImageLoaded: {},
                async init() {
                    try {
                        document.addEventListener('blog-error', (e) => {
                            this.error = e.detail.message;
                            this.loading = false;
                        });
                        const loadedPosts = await blogPosts.loadPosts();
                        this.posts = loadedPosts;
                        this.totalPages = Math.ceil(this.posts.length / this.postsPerPage);
                        this.loading = false;
                    } catch (error) {
                        console.error('Error loading blog posts:', error);
                        this.error = 'Failed to load blog posts. Please try again later.';
                        this.loading = false;
                    }
                }
            }" x-init="init()">
                <!-- Blog Posts -->
                <template x-if="!error">
                    <template x-for="post in posts.slice((currentPage - 1) * postsPerPage, currentPage * postsPerPage)" :key="post.id">
                        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg advanced-shadow transform hover:scale-105 transition-all duration-300" 
                             tabindex="0" 
                             :aria-label="'Blog Post ' + post.metadata.title">
                            <div class="relative w-full h-48 mb-4 overflow-hidden rounded-lg">
                                <div x-show="!blogImageLoaded[post.id]" class="absolute inset-0 bg-gray-200 animate-pulse"></div>
                                <img 
                                    @load="blogImageLoaded[post.id] = true"
                                    :src="post.metadata.image"
                                    :alt="post.metadata.title"
                                    class="w-full h-full object-cover transition-transform duration-300 hover:scale-110"
                                    loading="lazy"
                                    onerror="this.src='https://images.unsplash.com/photo-1633419461186-7d40a38105ec?q=80&w=2670'"
                                >
                            </div>
                            <div class="space-y-2">
                                <h3 class="text-2xl font-semibold mb-2 hover:text-blue-600 transition-colors" x-text="post.metadata.title"></h3>
                                <div class="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-2">
                                    <span x-text="post.metadata.author"></span>
                                    <span class="mx-2">â€¢</span>
                                    <span x-text="new Date(post.metadata.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })"></span>
                                </div>
                                <p class="text-gray-700 dark:text-gray-300" x-text="post.metadata.excerpt"></p>
                                <a :href="`/blog/${post.id}`" 
                                   class="inline-block mt-4 px-6 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors">
                                    Read More
                                </a>
                            </div>
                        </div>
                    </template>
                </template>
                
                <!-- Loading State -->
                <div x-show="loading" class="col-span-3 text-center py-12">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                    <p class="mt-4 text-gray-600 dark:text-gray-400">Loading blog posts...</p>
                </div>

                <!-- Error State -->
                <div x-show="error" class="col-span-3 text-center py-12">
                    <div class="bg-red-100 dark:bg-red-900 p-4 rounded-lg">
                        <p class="text-red-600 dark:text-red-400" x-text="error"></p>
                        <button 
                            @click="init()"
                            class="mt-4 px-4 py-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition"
                        >
                            Try Again
                        </button>
                    </div>
                </div>

                <!-- Empty State -->
                <div x-show="!loading && !error && posts.length === 0" class="col-span-3 text-center py-12">
                    <p class="text-gray-600 dark:text-gray-400">No blog posts available at the moment.</p>
                </div>
            </div>

            <!-- Pagination Controls -->
            <div class="flex justify-center mt-8 space-x-2">
                <button 
                    @click="currentPage = Math.max(1, currentPage - 1)"
                    class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" 
                    :disabled="currentPage === 1"
                    aria-label="Previous Page"
                >
                    <i class="fas fa-chevron-left mr-2"></i>
                    Previous
                </button>
                
                <div class="flex items-center px-4">
                    <span class="text-gray-600 dark:text-gray-400">
                        Page <span x-text="currentPage"></span> of <span x-text="totalPages"></span>
                    </span>
                </div>
                
                <button 
                    @click="currentPage = Math.min(totalPages, currentPage + 1)"
                    class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" 
                    :disabled="currentPage === totalPages"
                    aria-label="Next Page"
                >
                    Next
                    <i class="fas fa-chevron-right ml-2"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section id="testimonials" class="py-20 bg-gray-50 dark:bg-gray-900">
        <div class="container mx-auto px-6">
            <h2 class="text-4xl font-bold text-center mb-12 gradient-text">
                What Our Clients Say
            </h2>
            
            <div 
                class="flex flex-col md:flex-row md:space-x-6 space-y-6 md:space-y-0"
                x-data="{ 
                    currentTestimonial: 0,
                    testimonials: [
                        {
                            name: 'Dr. Robert Ferdinand',
                            role: 'Ophthalmologist',
                            image: 'https://images.unsplash.com/photo-1622253692010-333f2da6031d?q=80&w=2670',
                            quote: 'EyeUnit.ai\'s diagnostic platform has transformed the way we approach eye health. The precision and efficiency are unparalleled.'
                        },
                        {
                            name: 'Daniel P.',
                            role: 'Medical Researcher',
                            image: 'https://images.unsplash.com/photo-1633332755192-727a05c4013d?q=80&w=2360',
                            quote: 'The research analytics provided by EyeUnit.ai have accelerated our studies, leading to groundbreaking discoveries in ocular health.'
                        },
                        {
                            name: 'Laura Martinez',
                            role: 'Healthcare Administrator',
                            image: 'https://images.unsplash.com/photo-1595152772835-219674b2a8a6',
                            quote: 'Integrating EyeUnit.ai\'s solutions into our clinical workflow was seamless, enhancing our service delivery and patient care.'
                        }
                    ]
                }"
            >
                <template x-for="(testimonial, index) in testimonials" :key="index">
                    <div 
                        x-show="currentTestimonial === index"
                        x-transition:enter="transition ease-out duration-300"
                        x-transition:enter-start="opacity-0 transform translate-x-4"
                        x-transition:enter-end="opacity-100 transform translate-x-0"
                        class="bg-white dark:bg-gray-800 p-6 rounded-lg advanced-shadow flex-1"
                    >
                        <div class="flex items-center mb-4">
                            <img 
                                :src="testimonial.image" 
                                :alt="testimonial.name"
                                class="w-16 h-16 rounded-full object-cover mr-4"
                                loading="lazy"
                            >
                            <div>
                                <h3 class="text-xl font-semibold" x-text="testimonial.name"></h3>
                                <p class="text-gray-600 dark:text-gray-400" x-text="testimonial.role"></p>
                            </div>
                        </div>
                        <p class="text-gray-700 dark:text-gray-300" x-text="testimonial.quote"></p>
                    </div>
                </template>
            </div>

            <!-- Testimonial Controls -->
            <div class="flex justify-center mt-4 space-x-2">
                <button 
                    @click="handleTestimonial('prev')"
                    class="p-2 rounded-full bg-gray-200"
                    aria-label="Previous Testimonial"
                >
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button 
                    @click="handleTestimonial('next')"
                    class="p-2 rounded-full bg-gray-200"
                    aria-label="Next Testimonial"
                >
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>

            <!-- Add to the testimonials section -->
            <div x-show="!testimonials.length" class="text-center py-12">
                <p class="text-gray-600 dark:text-gray-400">
                    No testimonials available at the moment.
                </p>
            </div>
        </div>
    </section>

    <!-- Team Section -->
    <section id="team" class="py-16 md:py-32 bg-white dark:bg-gray-800">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-12 gradient-text">
                Meet Our Team
            </h2>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8">
                <div class="team-card bg-gray-100 dark:bg-gray-700 p-6 rounded-xl shadow-lg" role="article" aria-labelledby="team-member-name">
                    <div class="relative">
                        <div class="w-24 h-24 md:w-32 md:h-32 mx-auto rounded-full overflow-hidden mb-4">
                            <img 
                                src="team-member.jpg" 
                                alt="Team Member"
                                loading="lazy"
                                decoding="async"
                                class="w-full h-full object-cover"
                                onerror="this.src='fallback-image.jpg'"
                            >
                        </div>
                        <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2">
                            <div class="flex space-x-2">
                                <a href="#" class="social-link">
                                    <i class="fab fa-linkedin-in"></i>
                                </a>
                                <a href="#" class="social-link">
                                    <i class="fab fa-twitter"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-6">
                        <h3 class="text-lg md:text-xl font-bold" id="team-member-name">Dr. Sarah Chen</h3>
                        <p class="text-blue-600 dark:text-blue-400">Chief Medical Officer</p>
                        <p class="mt-2 text-sm md:text-base text-gray-600 dark:text-gray-300">Leading expert in AI-powered ophthalmology</p>
                    </div>
                </div>
                <!-- Repeat for other team members -->
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 md:py-32 bg-blue-50 dark:bg-gray-900">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-12 gradient-text">
                Connect with EyeUnit.ai
            </h2>
            
            <div class="max-w-3xl mx-auto">
                <div class="bg-white dark:bg-gray-800 p-6 md:p-8 rounded-xl shadow-lg">
                    <form @submit.prevent="submitForm" class="space-y-6" x-data="contactForm()">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="form-group">
                                <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Name</label>
                            <input 
                                type="text"
                                x-model="form.name"
                                :class="{'border-red-500': errors.name}"
                                class="form-input"
                                placeholder="Your name"
                                @input="validateField('name')"
                            >
                            <p 
                                x-show="errors.name"
                                x-transition
                                class="mt-1 text-xs text-red-600"
                                x-text="errors.name"
                            ></p>
                        </div>
                            
                            <div class="form-group">
                                <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Email</label>
                            <input 
                                type="email"
                                x-model="form.email"
                                :class="{'border-red-500': errors.email}"
                                class="form-input"
                                placeholder="your.email@example.com"
                                @input="validateField('email')"
                            >
                            <p 
                                x-show="errors.email"
                                x-transition
                                class="mt-1 text-xs text-red-600"
                                x-text="errors.email"
                            ></p>
                        </div>
                    </div>

                        <div class="form-group">
                            <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300">Message</label>
                            <textarea
                                x-model="form.message"
                                :class="{'border-red-500': errors.message}"
                                rows="4"
                                class="form-textarea"
                                placeholder="Your message here..."
                                @input="validateField('message')"
                            ></textarea>
                            <p 
                                x-show="errors.message"
                                x-transition
                                class="mt-1 text-xs text-red-600"
                                x-text="errors.message"
                            ></p>
                        </div>

                        <div class="flex flex-col sm:flex-row gap-4">
                            <button
                                type="submit"
                                :disabled="isSubmitting || Object.keys(errors).length > 0"
                                class="responsive-button bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
                            >
                                <span x-show="!isSubmitting">Send Message</span>
                                <span x-show="isSubmitting" class="flex items-center justify-center">
                                    <svg class="animate-spin -ml-1 mr-2 h-4 w-4" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                    Sending...
                                </span>
                            </button>
                            
                            <a 
                                href="https://api.whatsapp.com/send?phone=34679794037"
                                target="_blank"
                                rel="noopener noreferrer"
                                class="responsive-button bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all duration-200 flex items-center justify-center gap-2"
                            >
                                <i class="fab fa-whatsapp"></i>
                                <span class="text-sm md:text-base">WhatsApp</span>
                            </a>
                        </div>
                    </form>

                    <div 
                        x-show="successMessage"
                        x-transition:enter="transition ease-out duration-300"
                        x-transition:enter-start="opacity-0 transform translate-y-2"
                        x-transition:enter-end="opacity-100 transform translate-y-0"
                        class="mt-4 p-4 bg-green-100 text-green-700 rounded-lg text-sm"
                    >
                        <p class="text-center" x-text="successMessage"></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter Section -->
    <section id="newsletter" class="py-16 md:py-24 bg-white dark:bg-gray-800">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-8 gradient-text">
                Subscribe to Our Newsletter
            </h2>
            
            <div class="max-w-xl mx-auto">
                <div class="bg-gray-100 dark:bg-gray-700 p-6 md:p-8 rounded-xl shadow-lg">
                    <form @submit.prevent="subscribe" class="space-y-4">
                        <div class="flex flex-col md:flex-row gap-4">
                            <input 
                                type="email" 
                                class="flex-1 px-4 py-2 text-sm md:text-base rounded-lg border-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200" 
                                placeholder="Enter your email"
                                x-model="subscribeEmail"
                            >
                            <button 
                                type="submit"
                                :disabled="isSubscribing || !subscribeEmail"
                                class="w-full md:w-auto px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
                            >
                                <span x-show="!isSubscribing">Subscribe</span>
                                <span x-show="isSubscribing" class="flex items-center">
                                    <svg class="animate-spin h-4 w-4 mr-2" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                    Processing...
                                </span>
                            </button>
                        </div>
                    </form>
                    
                    <div 
                        x-show="newsletterSuccess" 
                        x-transition
                        class="mt-4 text-sm text-green-600 text-center"
                    >
                        Thank you for subscribing to our newsletter!
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center mb-4 md:mb-0">
                                       <h1 class="text-2xl font-bold gradient-text">EyeUnit.ai</h1>
                </div>

                <div class="flex space-x-4 mb-4 md:mb-0">
                    <a href="mailto:hello@eyeunit.ai" class="text-2xl hover:text-blue-400 flex items-center gap-2" aria-label="Email Us">
                        <i class="fas fa-envelope"></i>
                        <span class="text-base">hello@eyeunit.ai</span>
                    </a>
                </div>

                <div class="flex space-x-4">
                    <a href="/privacy.html" class="hover:text-blue-400" aria-label="Privacy Policy">Privacy Policy</a>
                    <a href="/terms.html" class="hover:text-blue-400" aria-label="Terms of Service">Terms of Service</a>
                    <a href="/sitemap.html" class="hover:text-blue-400" aria-label="Sitemap">Sitemap</a>
                </div>
            </div>

            <div class="mt-8">
                <p class="text-sm text-gray-400 text-center">
                    &copy; 2024 EyeUnit.ai. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript for Interactive Elements -->
    <script src="/blogPosts.js"></script>
    <script>
        // Parallax Effect
        document.addEventListener('DOMContentLoaded', () => {
            const scene = document.getElementById('hero-scene');
            if (scene) {
                const parallaxInstance = new Parallax(scene, {
                    relativeInput: true,
                    hoverOnly: true,
                    calibrateX: true,
                    calibrateY: true
                });
            }

            // GSAP Animations
            gsap.from('.gradient-text', { duration: 1, y: -50, opacity: 0, ease: 'power2.out', delay: 0.5 });
            gsap.from('.hero-image', { duration: 1, scale: 0.8, opacity: 0, ease: 'power2.out', delay: 1 });
        });

        // Smooth Scroll
        document.addEventListener('DOMContentLoaded', () => {
            // Smooth Scroll
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth' });
                        // Close mobile menu if open
                        const mobileMenu = document.querySelector('[x-data]').__x.$data.mobileMenu;
                        if (mobileMenu && window.innerWidth < 768) {
                            document.querySelector('[x-data]').__x.$data.mobileMenu = false;
                        }
                    }
                });
            });

        // Initialize Chart
        const ctx = document.getElementById('researchChart')?.getContext('2d');
        if (ctx) {
            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, 'rgba(59, 130, 246, 0.5)');
            gradient.addColorStop(1, 'rgba(59, 130, 246, 0.1)');

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['2023 Q1', '2023 Q2', '2023 Q3', '2023 Q4', '2024 Q1'],
                    datasets: [{
                        label: 'AI Model Accuracy',
                        data: [85, 88, 92, 94, 96],
                        borderColor: '#3B82F6',
                        backgroundColor: gradient,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 6,
                        pointBackgroundColor: '#3B82F6'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: { font: { size: 14 } }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(0, 0, 0, 0.1)' }
                        }
                    }
                }
            });
        }
    });

    // Optimize animations with requestAnimationFrame
    function animateScroll() {
        requestAnimationFrame(() => {
            const scrollProgress = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
            document.querySelector('.progress-bar').style.width = `${scrollProgress}%`;
        });
    }
    window.addEventListener('scroll', animateScroll, { passive: true });
    </script>

    <!-- Live Chat Integration (Optional) -->
    <!-- Example: Tawk.to Live Chat -->
    <!--
    <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/YOUR_TAWKTO_PROPERTY_ID/default';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
    })();
    </script>
    -->

    <!-- Add API configuration -->
    <script>
        const API_CONFIG = {
            contact: 'mailto:hello@eyeunit.ai',
            subscribe: 'mailto:hello@eyeunit.ai?subject=Newsletter%20Subscription',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            }
        };
    </script>

    <!-- Add after contact form -->
    <div
        x-show="formSubmitted"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 transform translate-y-2"
        x-transition:enter-end="opacity-100 transform translate-y-0"
        class="mt-4 p-4 bg-green-100 text-green-700 rounded-lg"
    >
        <p class="text-center">Thank you for your message! We'll get back to you soon.</p>
    </div>

    <!-- Add before closing body tag -->
    <button 
        @click="window.scrollTo({top: 0, behavior: 'smooth'})"
        x-show="scrollProgress > 20"
        class="fixed bottom-8 right-8 p-4 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transform hover:scale-110 transition-all duration-300 z-50"
        aria-label="Scroll to Top"
    >
        <i class="fas fa-arrow-up"></i>
        <span class="sr-only">Scroll to Top</span>
    </button>

    <div x-show="Object.values(errors).some(Boolean)" class="text-red-500 text-sm mt-2">
        Please fix the errors above before submitting.
    </div>

    <div 
        x-show="mobileMenu"
        class="fixed inset-0 bg-black bg-opacity-50 z-30"
        @click="mobileMenu = false"
    ></div>

    <!-- Add Mermaid initialization script -->
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'neutral',
            flowchart: {
                curve: 'basis'
            }
        });
    </script>

    <!-- Add script to close mobile menu on navigation -->
    <script>
        // Close mobile menu on navigation
        document.addEventListener('DOMContentLoaded', () => {
            const links = document.querySelectorAll('a[href^="#"]');
            links.forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth < 768) {
                        document.querySelector('[x-data]').__x.$data.mobileMenu = false;
                    }
                });
            });

            // Close mobile menu on resize
            window.addEventListener('resize', () => {
                if (window.innerWidth >= 768) {
                    document.querySelector('[x-data]').__x.$data.mobileMenu = false;
                }
            });

            // Close mobile menu on escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    document.querySelector('[x-data]').__x.$data.mobileMenu = false;
                }
            });
        });
    </script>

    <!-- Add system preference detection -->
    <script>
        function detectColorScheme() {
            if (localStorage.getItem('darkMode') === null && 
                window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
                return true;
            }
            return localStorage.getItem('darkMode') === 'true';
        }
    </script>

    <!-- Fix Alpine.js data and functionality -->
    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('formHandler', () => ({
                form: {
                    name: '',
                    email: '',
                    message: ''
                },
                errors: {},
                isSubmitting: false,
                successMessage: '',
                darkMode: localStorage.getItem('darkMode') === 'true' || (!('darkMode' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches),
                mobileMenu: false,
                scrollProgress: 0,
                testimonialIndex: 0,
                
                init() {
                    this.checkDarkMode();
                    this.initScrollListener();
                    this.initResizeListener();
                },
                
                checkDarkMode() {
                    document.documentElement.classList.toggle('dark', this.darkMode);
                    this.$watch('darkMode', value => {
                        document.documentElement.classList.toggle('dark', value);
                        localStorage.setItem('darkMode', value);
                    });
                },
                
                toggleDarkMode() {
                    this.darkMode = !this.darkMode;
                },
                
                initScrollListener() {
                    window.addEventListener('scroll', () => {
                        this.scrollProgress = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
                    }, { passive: true });
                },
                
                initResizeListener() {
                    window.addEventListener('resize', () => {
                        if (window.innerWidth >= 768) {
                            this.mobileMenu = false;
                        }
                    });
                },
                
                handleTestimonial(direction) {
                    const testimonials = document.querySelectorAll('.testimonial');
                    if (direction === 'next') {
                        this.testimonialIndex = (this.testimonialIndex + 1) % testimonials.length;
                    } else {
                        this.testimonialIndex = (this.testimonialIndex - 1 + testimonials.length) % testimonials.length;
                    }
                },
                
                validateField(field) {
                    const value = this.form[field]?.trim();
                    delete this.errors[field];
                    
                    if (!value) {
                        this.errors[field] = `${field.charAt(0).toUpperCase() + field.slice(1)} is required`;
                        return;
                    }
                    
                    switch(field) {
                        case 'email':
                            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
                                this.errors.email = 'Please enter a valid email address';
                            }
                            break;
                        case 'name':
                            if (value.length < 2) {
                                this.errors.name = 'Name must be at least 2 characters';
                            }
                            break;
                        case 'message':
                            if (value.length < 10) {
                                this.errors.message = 'Message must be at least 10 characters';
                            }
                            break;
                    }
                },
                
                async submitForm() {
                    this.isSubmitting = true;
                    this.errors = {};
                    
                    try {
                        ['name', 'email', 'message'].forEach(field => this.validateField(field));
                        
                        if (Object.keys(this.errors).length > 0) {
                            return;
                        }
                        
                        const mailtoLink = `mailto:hello@eyeunit.ai?subject=${encodeURIComponent('Contact Form Submission')}&body=${encodeURIComponent(
                            `Name: ${this.form.name}\nEmail: ${this.form.email}\n\nMessage:\n${this.form.message}`
                        )}`;
                        
                        window.location.href = mailtoLink;
                        this.successMessage = 'Thank you for your message! We will get back to you soon.';
                        this.resetForm();
                    } finally {
                        this.isSubmitting = false;
                    }
                },
                
                resetForm() {
                    this.form = {
                        name: '',
                        email: '',
                        message: ''
                    };
                    this.errors = {};
                }
            }));
        });
    </script>
</body>
</html>
